PINSEL2 EQU 0xE002C014
IO1DIR  EQU 0xE0028018


			;CODE TO SETUP STACK FOR THE SYSTEM

			AREA setup,CODE,READONLY
			EXPORT setup
			LDR R0,=PINSEL2
			LDR R1,[R0]
			LDR R2,=1
			BIC R1,R1,R2,LSL #3
			STR R1,[R0]
			LDR R0,=IO1DIR
			LDR R1,[R0]
			LDR R2,=1
			ORR R1,R1,R2,LSL #16
			STR R1,[R0]
			LDR R0,=0X03
			LDR R1,=16
			SWI 0
			;LDR R0,0X02
			;LDR R1,=16
			;SWI 0 

			LDR R0,=0x40003FCC	 ;STORE STARTING ADDRESSES OF FLASH FOR EACH PROCESS AT 4000XFCC LOCATION!
			LDR R1,=0x00010000
			STR R1,[R0]
			LDR R0,=0X40004FCC
			LDR R1,=0X00018000
			STR R1,[R0]
			LDR R0,=0X40005FCC
			LDR R1,=0X00020000
			STR R1,[R0]


			LDR R2,=0X40000FCC			
			LDR R3,=0X40001FDC 	;    STORE SP VALUE FOR ALL OTHER 3 PROCESSES
			STMIA R3,{R2}
			LDR R3,=0X40001FE0
			STMIA R3,{R2}
			LDR R3,=0X40001FE4
			STMIA R3,{R2}
			LDR R6,=0X40001FFC
			LDR R5,=0X00000000
			STR R5,[R6]

			;seting up values for the process state  as all ready

			LDR R8,=0x40001F15
			LDR R9,=0
			STRB R9,[R8]
			ADD R8,R8,#1
			STRB R9,[R8]
			ADD R8,R8,#1
			STRB R9,[R8]
			ADD R8,R8,#1
			;to block a process
			;LDR R9,=0x00
			STRB R9,[R8]

			;seting up the schedular queu
			LDR R8,=0x40001F10
			LDR R9,=0
			STRB R9,[R8]
			ADD R8,R8,#1
			ADD R9,R9,#1
			STRB R9,[R8]
			ADD R8,R8,#1
			ADD R9,R9,#1
			STRB R9,[R8]
			ADD R8,R8,#1
			ADD R9,R9,#1
			STRB R9,[R8]

			LDR R13,=0x40000FD0
			BX R14

			END